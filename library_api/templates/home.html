{%extends 'bootstrap_starter.html' %}

{%block content%}

<div class="container">
    <br /><br /><br />
    <center>
        <h2>LIBRARY</h2><br />
        <h4>Encuentra algún libro aquí:</h4>
    </center>
    <input class="form-control" id="myInput" type="text" placeholder="Search.."><br>
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>#Páginas</th>
                <th>Autor(es)</th>
                <th>Idioma</th>
                <th>Editorial</th>
            </tr>
        </thead>
        <tbody id="myTable">
            {%for book in library%}
            <tr>
                <td>{{book.title}}</td>
                <td>{{book.pages}}</td>
                <td>
                    {%for author in book.author.all%}
                    <li>{{author}}</li>
                    {%endfor%}
                </td>
                <td>{{book.idiom}}</td>
                <td>{{book.editorial}}</td>
            </tr>
            {%endfor%}
        </tbody>
    </table>

    <br /><br /><br />
    <center>
        <h4>Ingresar nuevo:</h4>
        <button type="button" class="btn btn-link"
            onclick="location.href = 'http://127.0.0.1:8000/api/author/';"><strong>AUTOR</strong></button>
        <button type="button" class="btn btn-link"
            onclick="location.href = 'http://127.0.0.1:8000/api/book/';"><strong>LIBRO</strong></button>
    </center>

</div>

{%endblock%}

<script>
    $(document).ready(function () {
        $("#myInput").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#myTable tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        })
    });
</script>